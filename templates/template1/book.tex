
\documentclass[11pt,fleqn]{report} % Default font size and left-justified equations

\usepackage[T1,T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{indentfirst}
\usepackage{graphicx}
\usepackage{color}
\usepackage{xcolor}
\usepackage{numprint}
\usepackage{mdframed}
\usepackage{ifthen}
\usepackage{gensymb}
\usepackage{glossaries}
\usepackage[section]{placeins}

\PassOptionsToPackage{hyphens}{url}\usepackage{hyperref}

\newcommand{\length}[1]{длина #1~м}

\newcommand{\geopoint}[5]{#4\footnote{
    \href{https://www.google.com/maps?q=#1,#2}
    {\ifthenelse{\equal{#5}{}}{#4}{#5}:
      \ifthenelse{\equal{#3}{}}{}{высота~\numprint{#3}~м, }
      координаты~\nprounddigits{6}\numprint{#1}, \numprint{#2}
    }
  }
}

\newmdenv[topline=false,
bottomline=false,
rightline=false,
linewidth=2pt,
nobreak=true
]{routeSectionEnv}
\newcommand{\routeSection}[2]{
  \begin{routeSectionEnv}
    \setlength{\parindent}{0ex}
    \setcounter{mpfootnote}{\value{footnote}}
    \renewcommand{\thempfootnote}{\arabic{mpfootnote}}
    \textbf{
      Участок #1:
    } #2
    \setcounter{footnote}{\value{mpfootnote}}
  \end{routeSectionEnv}
}

\newcommand{\routeKey}[2]{
  \begin{routeSectionEnv}[linecolor=red]
    \setlength{\parindent}{0ex}
    \setcounter{mpfootnote}{\value{footnote}}
    \renewcommand{\thempfootnote}{\arabic{mpfootnote}}
    \textbf{
      Ключ маршрута, участок #1:
    } #2
    \setcounter{footnote}{\value{mpfootnote}}
  \end{routeSectionEnv}
}

\title{Описания маршрутов}
\date{Версия от \today}
\author{под авторством сообщества}

\makeglossaries

\newglossaryentry{uiaaI}
{
  name={I~к.с.},
  description={Первая категория сложности лазания в системе UIAA.
    Самый легкий вид скального лазания. Руки используются только для
    баланса. Новички должны использовать веревку},
  sort=uiaa1
}

\newglossaryentry{uiaaII}
{
  name={II~к.с.},
  description={Вторая категория сложности лазания в системе UIAA.
    Простейшие комбинации с использование рук и ног. Лазание с
    использованием трех точек опоры},
  sort=uiaa2
}

\newglossaryentry{uiaaIII}
{
  name={III~к.с.},
  description={Третья категория сложности лазания в системе UIAA.
    Вплоть до вертикальных стенок, иногда требуется использование силы
    при лазании},
  sort=uiaa3
}

\newglossaryentry{uiaaIV}
{
  name={IV~к.с.},
  description={Четвертая категория сложности лазания в системе UIAA.
    Не слишком частые, иногда неудобные зацепы. Прохождение требует
    некоторой тренированности},
  sort=uiaa4
}

\newglossaryentry{uiaaV}
{
  name={V~к.с.},
  description={Пятая категория сложности лазания в системе UIAA.
    Редкие зацепы, требует аккуратного лазания, возникает желание
    осмотреть участок перед прохождением},
  sort=uiaa5
}

\newglossaryentry{uiaaVI}
{
  name={VI~к.с.},
  description={Шестая категория сложности лазания в системе UIAA.
    Редкие зацепы, требующие специальных скалолазных движений и
    укрепленных предплечий при прохождении},
  sort=uiaa6
}  

\newglossaryentry{uiaaVII}
{
  name={VII~к.с.},
  description={Седьмая категория сложности лазания в системе UIAA.
    Редкие и неудобные зацепы. Прохождение участка требует длительных
    скалолазных тренировок, отличную силу пальцев, растяжку, чувство баланса},
  sort=uiaa7
}

\begin{document}

\maketitle

\tableofcontents

\chapter{Учебные маршруты Ала-Арчи}

\routeListEasyAlaArcha

\chapter{Маршруты Ала-Арчи средней сложности}

\routeListMiddleAlaArcha

\chapter{О проекте}

\newcommand{\gitRepo}[0]{\href{https://github.com/johnlepikhin/alpine-guidebook}{GitHub}}

Пока что я встречал два вида описаний маршрутов:
\begin{itemize}
\item Гайдбук типа "5000 игр на одном CD". Качество описаний и схем
  таково, что авторов хочется обнять и плакать.
\item 20 страниц подробного описания маршрута 3А категории сложности.
\end{itemize}

Всё это крайне неуодбно, когда в толпе и морозе альплагеря надо
составить маршрутный лист, а ты уже потратил пару часов на поиск хотя
бы вот таких описаний.

Нет цели заработать денег~--- проект полностью открытый~--- и нет цели
играть в сурового первопроходца и писать 20-страничные портянки с
описанием каждого камня. Зато есть желание сделать \textit{удобное}
описание популярных, ходимых маршрутов.

\section{Технические возможности}

\begin{itemize}

\item Генерация гайдбука максимально автоматизирована и унифицирована.
  Буквально за минуту можно сделать отдельные готовые к печати книжки:

  \begin{itemize}
  \item «Все маршруты Ала-Арчи»
  \item «Все двойки мира» (но к настоящему моменту в каталоге есть
    только Ала-Арча)
  \item «Ледовые маршруты сложнее 3Б»
  \end{itemize}
  и т.д.

\item Поддержка схем в формате SVG.
  
\item Каталог координат ключевых точек.

\item В проекте пока есть только один шаблон книги, но ничто не мешает
  добавить и использовать свои шаблоны для книги, для маршрута, для
  встречающихся в тексте координат.

\item Возможность добавлять горные регионы. Была мысль сделать
  поддержку многоязычности, но пришел к выводу, что не имеет смысла
  заводить для этого отдельный уровень абстракции.
  
\end{itemize}

\section{Дальнейшие планы}

\begin{itemize}
\item Работа над оформлением основного шаблона
\item Добавить поддержку групп маршрутов. Необходимо для оформления
  списков маршрутов.
\end{itemize}

Маршруты, которые я хорошо помню, я уже почти все описал. Не хочу
давать описания к маршрутам, которые помню плохо.

\section{Как можно помочь}

Нужны авторские описания и схемы. Описания в формате \LaTeX, но с
радостью приму и обычный doc-файл, или даже словестные описания
неточностей :-) Схемы рисую в SVG, и хотелось бы сохранить эту
традицию для простоты совместной правки.

Все исходные тексты доступны на \gitRepo. Можно создавать merge
requests, можно присылать тексты/комментарии на
\href{mailto:johnlepikhin@gmail.com}{johnlepikhin@gmail.com} или
связаться со мной любым удобным способом.

\section{Права на использование}

Все тексты, схемы, фотографии и шаблоны распространяются по лицензии
\href{https://creativecommons.org/licenses/by-sa/4.0/legalcode.ru}{CC
  BY-SA}. По аналогии с Википедией, у каждого изменения есть свой
автор, вносящий изменения по этой лицензии.

Все скрипты распространяются по лицении
\href{https://www.gnu.org/licenses/quick-guide-gplv3.ru.html}{GPL v3}.

Автоматически созданные материалы для печати, созданные на основе
представленных в проекте материалов, наследуют их лицензию, а
именно~--- CC BY-SA.

Проект размещен в репозитарии на \gitRepo.

\clearpage
 
\printglossary[title={Термины}]

\end{document}
